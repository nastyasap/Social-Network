"use strict";(self.webpackChunkmy_app_ts=self.webpackChunkmy_app_ts||[]).push([[505],{7505:function(e,s,n){n.r(s),n.d(s,{default:function(){return N}});var r=n(364),t=n(2791),a=n(6706),c=n(885),i=n(5559),u=n(3504),l="Message_message__TXeiQ",o="Message_ava__+rO5E",d="Message_text__xulOd",h="Message_name__pLRe+",f=n(184),m=t.memo((function(e){var s=e.message;return(0,f.jsxs)("div",{className:l,children:[(0,f.jsx)("div",{children:(0,f.jsx)(u.rU,{to:"/profile/"+s.userId,children:(0,f.jsx)("img",{alt:"ava",src:s.photo,className:o})})}),(0,f.jsxs)("div",{className:d,children:[(0,f.jsx)("div",{className:h,children:(0,f.jsx)("b",{children:s.userName})}),(0,f.jsx)("p",{children:s.message})]})]})})),_=function(){var e=(0,i.C)((function(e){return e.chat.messages})),s=(0,t.useRef)(null),n=(0,t.useState)(!0),r=(0,c.Z)(n,2),a=r[0],u=r[1];return(0,t.useEffect)((function(){var e;a&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,f.jsxs)("div",{style:{overflowY:"auto",height:"500px"},onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!a&&u(!0):a&&u(!1)},children:[e.map((function(e,s){return(0,f.jsx)(m,{message:e},s)})),(0,f.jsx)("div",{ref:s})]})},v=n(5711),x=n(6151),g="AddMessageForm_containerForm__86pl-",j="AddMessageForm_button__Wwak8",p=function(){var e=(0,t.useState)(""),s=(0,c.Z)(e,2),n=s[0],u=s[1],l=(0,i.C)((function(e){return e.chat.status})),o=(0,r.I0)(),d=function(){n&&(o((0,a.bG)(n)),u(""))};return(0,f.jsxs)("div",{className:g,children:[(0,f.jsx)(v.Z,{placeholder:"Enter your message",style:{maxWidth:400},value:n,onKeyPress:function(e){"Enter"===e.key&&d()},onChange:function(e){return u(e.currentTarget.value)}}),(0,f.jsx)(x.Z,{className:j,variant:"contained",disabled:"ready"!==l,onClick:d,children:"Send"})]})},C=n(6871),b=function(){var e=(0,r.I0)(),s=(0,i.C)((function(e){return e.auth.isAuth}));return(0,t.useEffect)((function(){return e((0,a.WE)()),function(){e((0,a.R7)())}}),[]),s?(0,f.jsxs)("div",{children:[(0,f.jsx)(_,{}),(0,f.jsx)(p,{})]}):(0,f.jsx)(C.Fg,{to:"/login",replace:!0})},y="Chat_wrapper__99XCS",N=function(){return(0,f.jsx)("div",{className:y,children:(0,f.jsx)(b,{})})}}}]);
//# sourceMappingURL=505.28a7c36b.chunk.js.map