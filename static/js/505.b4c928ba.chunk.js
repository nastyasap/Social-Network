"use strict";(self.webpackChunkmy_app_ts=self.webpackChunkmy_app_ts||[]).push([[505],{7505:function(e,s,n){n.r(s),n.d(s,{default:function(){return k}});var r=n(364),t=n(2791),a=n(6706),c=n(885),i=n(5559),u=n(3504),l="Message_message__TXeiQ",o="Message_ava__+rO5E",d="Message_text__xulOd",h="Message_name__pLRe+",f=n(4219),m=n(184),_=t.memo((function(e){var s=e.message;return(0,m.jsxs)("div",{className:l,children:[(0,m.jsx)("div",{children:(0,m.jsx)(u.rU,{to:"/profile/"+s.userId,children:(0,m.jsx)("img",{alt:"ava",src:s.photo||f,className:o})})}),(0,m.jsxs)("div",{className:d,children:[(0,m.jsx)("div",{className:h,children:(0,m.jsx)("b",{children:s.userName})}),(0,m.jsx)("p",{children:s.message})]})]})})),v=function(){var e=(0,i.C)((function(e){return e.chat.messages})),s=(0,t.useRef)(null),n=(0,t.useState)(!0),r=(0,c.Z)(n,2),a=r[0],u=r[1];return(0,t.useEffect)((function(){var e;a&&(null===(e=s.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[e]),(0,m.jsxs)("div",{style:{overflowY:"auto",height:"500px"},onScroll:function(e){var s=e.currentTarget;Math.abs(s.scrollHeight-s.scrollTop-s.clientHeight)<300?!a&&u(!0):a&&u(!1)},children:[e.map((function(e,s){return(0,m.jsx)(_,{message:e},s)})),(0,m.jsx)("div",{ref:s})]})},x=n(5711),g=n(6151),j="AddMessageForm_containerForm__86pl-",p="AddMessageForm_button__Wwak8",C=function(){var e=(0,t.useState)(""),s=(0,c.Z)(e,2),n=s[0],u=s[1],l=(0,i.C)((function(e){return e.chat.status})),o=(0,r.I0)(),d=function(){n&&(o((0,a.bG)(n)),u(""))};return(0,m.jsxs)("div",{className:j,children:[(0,m.jsx)(x.Z,{placeholder:"Enter your message",style:{maxWidth:400},value:n,onKeyPress:function(e){"Enter"===e.key&&d()},onChange:function(e){return u(e.currentTarget.value)}}),(0,m.jsx)(g.Z,{className:p,variant:"contained",disabled:"ready"!==l,onClick:d,children:"Send"})]})},b=n(6871),y=function(){var e=(0,r.I0)(),s=(0,i.C)((function(e){return e.auth.isAuth}));return(0,t.useEffect)((function(){return e((0,a.WE)()),function(){e((0,a.R7)())}}),[]),s?(0,m.jsxs)("div",{children:[(0,m.jsx)(v,{}),(0,m.jsx)(C,{})]}):(0,m.jsx)(b.Fg,{to:"/login",replace:!0})},N="Chat_wrapper__99XCS",k=function(){return(0,m.jsx)("div",{className:N,children:(0,m.jsx)(y,{})})}}}]);
//# sourceMappingURL=505.b4c928ba.chunk.js.map